<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dialog Editor</title>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: #252722;
            font-family: 'Source Sans 3', sans-serif;
            position: relative;
            overflow-x: hidden;
        }

        .pattern-container {
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            opacity: 0.06;
            pointer-events: none;
            transform: rotate(-9.65deg);
            overflow: hidden;
        }

        .pattern-bg {
            position: absolute;
            width: 200%;
            height: 200%;
            animation: scrollPattern 15s linear infinite;
        }

        @keyframes scrollPattern {
            from {
                transform: translate(0, 0);
            }
            to {
                transform: translate(25px, 25px);
            }
        }

        .main-content {
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        svg#thing {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: visible;
        }

        .editable-text-area {
            font-family: 'Source Sans 3', sans-serif;
            font-size: 36px;
            font-weight: 400;
            color: #27271D;
            outline: none;
            line-height: 1.2;
            word-wrap: break-word;
            white-space: pre-wrap;
            margin: 0;
            padding: 0;
        }

        .download-btn {
            margin-top: 20px;
            border: none;
            background: none;
            padding: 0;
            cursor: pointer;
            transition: transform 0.2s ease;
            width: 192px;
            height: 45.5px;
        }

        .download-btn:hover {
            transform: translateY(-2px);
        }

        .download-btn:active {
            transform: translateY(0);
        }

        .credits {
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-family: 'Source Sans 3', sans-serif;
            font-weight: 400;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.78);
            text-shadow: 
                -1px -1px 0 rgba(0,0,0,0.7), 1px -1px 0 rgba(0,0,0,0.7),
                -1px 1px 0 rgba(0,0,0,0.7), 1px 1px 0 rgba(0,0,0,0.7);
            text-align: right;
            line-height: 1.4;
            z-index: 10;
        }
    </style>
</head>
<body>

<div class="pattern-container">
    <svg class="pattern-bg" xmlns="http://www.w3.org/2000/svg">
        <defs>
            <pattern id="gridPattern" x="0" y="0" width="25" height="25" patternUnits="userSpaceOnUse">
                <rect x="0" y="0" width="25" height="25" fill="none" stroke="white" stroke-width="0.5"/>
            </pattern>
        </defs>
        <rect x="0" y="0" width="100%" height="100%" fill="url(#gridPattern)"/>
    </svg>
</div>

<div class="main-content">
    <svg id="thing" width="592" height="164" viewBox="0 0 592 164" fill="none" xmlns="http://www.w3.org/2000/svg">
        <defs></defs>
        <path id="bg" d="M0 34L34 0H592V164H0V34Z" fill="#FEF8EC" fill-opacity="0.85"/>
        <path d="M25 0L0 25V0H25Z" fill="#02DA91"/>
        <path id="line" d="M36.5 9.5L9 37V154.5H582V9.5H36.5Z" stroke="#27271D" stroke-width="2"/>
        
        <foreignObject x="23" y="24" width="545.5" height="117.5">
            <div id="txt" class="editable-text-area" contenteditable="true" xmlns="http://www.w3.org/1999/xhtml">Type your msg there!!</div>
        </foreignObject>
    </svg>

    <button class="download-btn" onclick="dl()">
        <svg width="192" height="45.5" viewBox="0 0 192 45.5" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g filter="url(#filter0_d_95_2_small)">
                <rect width="190" height="43.5" rx="3.5" fill="#EDE5D8"/>
            </g>
            <path d="M103.717 43.5L14.3047 0H177.661L103.717 43.5Z" fill="#FAF1E4"/>
            <path d="M0 14.5L15 0H0V14.5Z" fill="#04DF8B"/>
            <path d="M41.0856 57V30.84H48.0856C52.0856 30.84 55.2056 31.92 57.4456 34.08C59.6856 36.24 60.8056 39.48 60.8056 43.8C60.8056 48.1467 59.699 51.44 57.4856 53.68C55.2723 55.8933 52.219 57 48.3256 57H41.0856ZM45.7256 53.24H47.7656C50.4056 53.24 52.4456 52.48 53.8856 50.96C55.3256 49.4133 56.0456 47.0267 56.0456 43.8C56.0456 40.6 55.3256 38.2667 53.8856 36.8C52.4456 35.3333 50.4056 34.6 47.7656 34.6H45.7256V53.24ZM73.7256 57.48C72.099 57.48 70.579 57.08 69.1656 56.28C67.7523 55.4533 66.6056 54.28 65.7256 52.76C64.8456 51.2133 64.4056 49.36 64.4056 47.2C64.4056 45.0133 64.8456 43.16 65.7256 41.64C66.6056 40.0933 67.7523 38.92 69.1656 38.12C70.579 37.2933 72.099 36.88 73.7256 36.88C75.379 36.88 76.9123 37.2933 78.3256 38.12C79.739 38.92 80.8856 40.0933 81.7656 41.64C82.6456 43.16 83.0856 45.0133 83.0856 47.2C83.0856 49.36 82.6456 51.2133 81.7656 52.76C80.8856 54.28 79.739 55.4533 78.3256 56.28C76.9123 57.08 75.379 57.48 73.7256 57.48ZM73.7256 53.72C75.1656 53.72 76.299 53.12 77.1256 51.92C77.9523 50.72 78.3656 49.1467 78.3656 47.2C78.3656 45.2267 77.9523 43.64 77.1256 42.44C76.299 41.24 75.1656 40.64 73.7256 40.64C72.2856 40.64 71.1523 41.24 70.3256 42.44C69.5256 43.64 69.1256 45.2267 69.1256 47.2C69.1256 49.1467 69.5256 50.72 70.3256 51.92C71.1523 53.12 72.2856 53.72 73.7256 53.72ZM90.6444 57L85.4444 37.36H90.0844L92.4444 47.56C92.6577 48.4933 92.831 49.4267 92.9644 50.36C93.1244 51.2933 93.2977 52.24 93.4844 53.2H93.6444C93.831 52.24 94.0177 51.2933 94.2044 50.36C94.4177 49.4 94.6444 48.4667 94.8844 47.56L97.4444 37.36H101.644L104.244 47.56C104.484 48.4933 104.711 49.4267 104.924 50.36C105.138 51.2933 105.351 52.24 105.564 53.2H105.724C105.911 52.24 106.084 51.2933 106.244 50.36C106.404 49.4267 106.578 48.4933 106.764 47.56L109.124 37.36H113.444L108.444 57H102.964L100.684 47.84C100.471 46.9067 100.271 45.9867 100.084 45.08C99.8977 44.1467 99.6977 43.16 99.4844 42.12H99.3244C99.1377 43.16 98.951 44.1467 98.7644 45.08C98.5777 46.0133 98.3777 46.9467 98.1644 47.88L95.9244 57H90.6444ZM117.326 57V37.36H121.126L121.446 40H121.606C122.486 39.1467 123.446 38.4133 124.486 37.8C125.526 37.1867 126.713 36.88 128.046 36.88C130.153 36.88 131.686 37.56 132.646 38.92C133.606 40.28 134.086 42.2 134.086 44.68V57H129.486V45.28C129.486 43.6533 129.246 42.5067 128.766 41.84C128.286 41.1733 127.5 40.84 126.406 40.84C125.553 40.84 124.793 41.0533 124.126 41.48C123.486 41.88 122.753 42.48 121.926 43.28V57H117.326ZM144.189 57.48C142.562 57.48 141.402 56.9867 140.709 56C140.042 55.0133 139.709 53.6667 139.709 51.96V28.76H144.309V52.2C144.309 52.76 144.416 53.16 144.629 53.4C144.842 53.6133 145.069 53.72 145.309 53.72C145.416 53.72 145.509 53.72 145.589 53.72C145.696 53.6933 145.842 53.6667 146.029 53.64L146.629 57.08C146.362 57.1867 146.016 57.28 145.589 57.36C145.189 57.44 144.722 57.48 144.189 57.48ZM158.608 57.48C156.982 57.48 155.462 57.08 154.048 56.28C152.635 55.4533 151.488 54.28 150.608 52.76C149.728 51.2133 149.288 49.36 149.288 47.2C149.288 45.0133 149.728 43.16 150.608 41.64C151.488 40.0933 152.635 38.92 154.048 38.12C155.462 37.2933 156.982 36.88 158.608 36.88C160.262 36.88 161.795 37.2933 163.208 38.12C164.622 38.92 165.768 40.0933 166.648 41.64C167.528 43.16 167.968 45.0133 167.968 47.2C167.968 49.36 167.528 51.2133 166.648 52.76C165.768 54.28 164.622 55.4533 163.208 56.28C161.795 57.08 160.262 57.48 158.608 57.48ZM158.608 53.72C160.048 53.72 161.182 53.12 162.008 51.92C162.835 50.72 163.248 49.1467 163.248 47.2C163.248 45.2267 162.835 43.64 162.008 42.44C161.182 41.24 160.048 40.64 158.608 40.64C157.168 40.64 156.035 41.24 155.208 42.44C154.408 43.64 154.008 45.2267 154.008 47.2C154.008 49.1467 154.408 50.72 155.208 51.92C156.035 53.12 157.168 53.72 158.608 53.72ZM176.813 57.48C175.106 57.48 173.706 56.9467 172.613 55.88C171.546 54.8133 171.013 53.4267 171.013 51.72C171.013 49.6133 171.933 47.9867 173.773 46.84C175.613 45.6667 178.546 44.8667 182.573 44.44C182.546 43.4 182.266 42.5067 181.733 41.76C181.226 40.9867 180.306 40.6 178.973 40.6C178.013 40.6 177.066 40.7867 176.133 41.16C175.226 41.5333 174.333 41.9867 173.453 42.52L171.773 39.44C172.866 38.7467 174.093 38.1467 175.453 37.64C176.839 37.1333 178.306 36.88 179.853 36.88C182.306 36.88 184.133 37.6133 185.333 39.08C186.559 40.52 187.173 42.6133 187.173 45.36V57H183.373L183.053 54.84H182.893C182.013 55.5867 181.066 56.2133 180.053 56.72C179.066 57.2267 177.986 57.48 176.813 57.48ZM178.293 53.88C179.093 53.88 179.813 53.6933 180.453 53.32C181.119 52.92 181.826 52.3867 182.573 51.72V47.32C179.906 47.6667 178.053 48.1867 177.013 48.88C175.973 49.5467 175.453 50.3733 175.453 51.36C175.453 52.24 175.719 52.88 176.253 53.28C176.786 53.68 177.466 53.88 178.293 53.88ZM199.558 57.48C197.104 57.48 195.144 56.5733 193.678 54.76C192.211 52.9467 191.478 50.4267 191.478 47.2C191.478 45.0667 191.864 43.2267 192.638 41.68C193.438 40.1333 194.478 38.9467 195.758 38.12C197.038 37.2933 198.384 36.88 199.798 36.88C200.918 36.88 201.864 37.08 202.638 37.48C203.438 37.8533 204.211 38.3733 204.958 39.04L204.798 35.88V28.76H209.398V57H205.598L205.278 54.88H205.118C204.398 55.6 203.558 56.2133 202.598 56.72C201.638 57.2267 200.624 57.48 199.558 57.48ZM200.678 53.68C202.144 53.68 203.518 52.9467 204.798 51.48V42.32C204.131 41.7067 203.464 41.28 202.798 41.04C202.131 40.8 201.464 40.68 200.798 40.68C199.544 40.68 198.464 41.2533 197.558 42.4C196.678 43.52 196.238 45.1067 196.238 47.16C196.238 49.2667 196.624 50.88 197.398 52C198.171 53.12 199.264 53.68 200.678 53.68ZM229.024 43.08L228.104 46.28H234.784L233.864 43.08C233.437 41.6933 233.024 40.2667 232.624 38.8C232.25 37.3333 231.877 35.88 231.504 34.44H231.344C230.997 35.9067 230.624 37.3733 230.224 38.84C229.85 40.28 229.45 41.6933 229.024 43.08ZM220.264 57L228.784 30.84H234.224L242.744 57H237.864L235.824 49.92H227.024L224.984 57H220.264ZM251.752 57.48C250.418 57.48 249.085 57.2267 247.752 56.72C246.418 56.1867 245.272 55.5333 244.312 54.76L246.472 51.8C247.352 52.4667 248.232 53 249.112 53.4C249.992 53.8 250.925 54 251.912 54C252.978 54 253.765 53.7733 254.272 53.32C254.778 52.8667 255.032 52.3067 255.032 51.64C255.032 51.08 254.818 50.6267 254.392 50.28C253.992 49.9067 253.472 49.5867 252.832 49.32C252.192 49.0267 251.525 48.7467 250.832 48.48C249.978 48.16 249.125 47.7733 248.272 47.32C247.445 46.84 246.765 46.24 246.232 45.52C245.698 44.7733 245.432 43.8533 245.432 42.76C245.432 41.0267 246.072 39.6133 247.352 38.52C248.632 37.4267 250.365 36.88 252.552 36.88C253.938 36.88 255.178 37.12 256.272 37.6C257.365 38.08 258.312 38.6267 259.112 39.24L256.992 42.04C256.298 41.5333 255.592 41.1333 254.872 40.84C254.178 40.52 253.445 40.36 252.672 40.36C251.685 40.36 250.952 40.5733 250.472 41C249.992 41.4 249.752 41.9067 249.752 42.52C249.752 43.2933 250.152 43.88 250.952 44.28C251.752 44.68 252.685 45.0667 253.752 45.44C254.658 45.76 255.538 46.16 256.392 46.64C257.245 47.0933 257.952 47.6933 258.512 48.44C259.098 49.1867 259.392 50.1733 259.392 51.4C259.392 53.08 258.738 54.52 257.432 55.72C256.125 56.8933 254.232 57.48 251.752 57.48ZM271.906 57V30.84H280.146C282.093 30.84 283.826 31.0933 285.346 31.6C286.866 32.1067 288.066 32.9467 288.946 34.12C289.826 35.2933 290.266 36.8933 290.266 38.92C290.266 40.84 289.826 42.4267 288.946 43.68C288.066 44.9333 286.879 45.8667 285.386 46.48C283.893 47.0933 282.199 47.4 280.306 47.4H276.546V57H271.906ZM276.546 43.68H279.946C283.786 43.68 285.706 42.0933 285.706 38.92C285.706 37.2667 285.199 36.1333 284.186 35.52C283.199 34.88 281.733 34.56 279.786 34.56H276.546V43.68ZM295.187 57V30.84H299.947L308.107 45.56L310.787 51.12H310.947C310.841 49.7867 310.707 48.3333 310.547 46.76C310.414 45.1867 310.347 43.6667 310.347 42.2V30.84H314.787V57H310.027L301.867 42.28L299.187 36.72H299.027C299.134 38.1067 299.254 39.56 299.387 41.08C299.547 42.6 299.627 44.0933 299.627 45.56V57H295.187ZM332.397 57.48C330.051 57.48 327.944 56.96 326.077 55.92C324.211 54.88 322.744 53.36 321.677 51.36C320.611 49.3333 320.077 46.88 320.077 44C320.077 41.1467 320.624 38.7067 321.717 36.68C322.811 34.6267 324.291 33.0667 326.157 32C328.024 30.9067 330.117 30.36 332.437 30.36C334.304 30.36 335.877 30.7067 337.157 31.4C338.464 32.0667 339.531 32.8267 340.357 33.68L337.877 36.68C337.211 36.04 336.464 35.5067 335.637 35.08C334.837 34.6267 333.824 34.4 332.597 34.4C330.277 34.4 328.397 35.2533 326.957 36.96C325.544 38.64 324.837 40.9467 324.837 43.88C324.837 46.8667 325.517 49.2133 326.877 50.92C328.237 52.6 330.224 53.44 332.837 53.44C333.584 53.44 334.291 53.3467 334.957 53.16C335.624 52.9467 336.171 52.6533 336.597 52.28V46.64H331.637V42.84H340.757V54.36C339.877 55.24 338.704 55.9867 337.237 56.6C335.797 57.1867 334.184 57.48 332.397 57.48Z" fill="#27271D"/>
            <defs>
                <filter id="filter0_d_95_2_small" x="0" y="0" width="192" height="45.5" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                    <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                    <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                    <feOffset dx="2" dy="2"/>
                    <feComposite in2="hardAlpha" operator="out"/>
                    <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0"/>
                    <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_95_2_small"/>
                    <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_95_2_small" result="shape"/>
                </filter>
            </defs>
        </svg>
    </button>
</div>

<div class="credits">
    Website Made by Fekyat.<br>
    XXL Woofia by © 2025 S.G.Arts Ltd. All Rights Reserved.
</div>

<script>
    const txt = document.getElementById('txt');
    const svg = document.getElementById('thing');
    
    const h1 = 164;
    const h2 = 117.5;
    const h3 = 154.5;
    const BUFFER = 10;
    
    function fix() {
        const h = txt.scrollHeight;
        const needed = Math.max(h2, h);
        const pad = h1 - h2;
        const newH = needed + pad;
        updateStuff(svg, newH);
        return newH;
    }
    
    function updateStuff(s, h) {
        const bg = s.querySelector('#bg');
        const ln = s.querySelector('#line');
        const fo = s.querySelector('foreignObject');

        s.setAttribute('height', h);
        s.setAttribute('viewBox', `0 0 592 ${h}`);
        
        if (fo) {
            const pad = h1 - h2;
            fo.setAttribute('height', h - pad);
        }

        bg.setAttribute('d', `M0 34L34 0H592V${h}H0V34Z`);
        
        const delta = h - h1;
        ln.setAttribute('d', `M36.5 9.5L9 37V${h3 + delta}H582V9.5H36.5Z`);
    }

    txt.addEventListener('paste', (e) => {
        e.preventDefault();
        const text = (e.clipboardData || window.clipboardData).getData('text');
        document.execCommand('insertText', false, text);
    });
    
    const obs = new ResizeObserver(fix);
    obs.observe(txt);
    window.onload = fix;

    const cache = {};
    async function getFont(url) {
        if (cache[url]) return cache[url];
        const r = await fetch(url);
        const b = await r.blob();
        return new Promise((res, rej) => {
            const reader = new FileReader();
            reader.onloadend = () => {
                cache[url] = reader.result;
                res(reader.result);
            };
            reader.onerror = rej;
            reader.readAsDataURL(b);
        });
    }

    function wrap(ctx, text, max) {
        const lines = [];
        const paras = text.split('\n');
        
        for (const p of paras) {
            if (p === '') {
                lines.push('');
                continue;
            }
            const words = p.split(' ');
            let cur = words[0] || '';

            for (let i = 1; i < words.length; i++) {
                const w = words[i];
                const test = cur + " " + w;
                const width = ctx.measureText(test).width;
                if (width < max) {
                    cur = test;
                } else {
                    lines.push(cur);
                    cur = w;
                }
            }
            lines.push(cur);
        }
        return lines;
    }

    async function dl() {
        const scale = 2;
        const elem = document.getElementById('thing');
        const textEl = document.getElementById('txt');
        
        const curH = parseFloat(elem.getAttribute('height'));
        const fo = elem.querySelector('foreignObject');
        const foH = parseFloat(fo.getAttribute('height'));
        
        const clone = elem.cloneNode(true);
        const foClone = clone.querySelector('foreignObject');

        const fontURL = 'https://fonts.gstatic.com/s/sourcesans3/v11/nwpStKy2OAdR1K-IwhWPwx_swAvT90imenQSS0MM33Jkcb7u.woff2';
        try {
            const fontData = await getFont(fontURL);
            const style = document.createElementNS('http://www.w3.org/2000/svg', 'style');
            style.textContent = `@font-face { font-family: 'Source Sans 3'; src: url(${fontData}) format('woff2'); font-weight: 400; font-style: normal; }`;
            const defs = clone.querySelector('defs') || clone.insertBefore(document.createElementNS('http://www.w3.org/2000/svg', 'defs'), clone.firstChild);
            defs.appendChild(style);
        } catch (e) {
            console.error("font fail", e);
        }

        const cs = window.getComputedStyle(textEl);
        const content = textEl.innerText || ' ';
        const maxW = parseFloat(foClone.getAttribute('width')) - 5;
        const x = parseFloat(foClone.getAttribute('x'));
        const y = parseFloat(foClone.getAttribute('y'));
        
        let lh = parseFloat(cs.lineHeight);
        if (isNaN(lh)) {
            lh = parseFloat(cs.fontSize) * 1.2;
        }

        const tmpCanvas = document.createElement('canvas');
        const tmpCtx = tmpCanvas.getContext('2d');
        tmpCtx.font = `${cs.fontWeight} ${cs.fontSize} "${cs.fontFamily.replace(/['"]/g, '')}"`;
        
        const lines = wrap(tmpCtx, content, maxW);
        
        const calcH = lines.length * lh;
        
        if (calcH > foH - BUFFER) {
            const pad = h1 - h2;
            const newH = calcH + pad + BUFFER;
            updateStuff(clone, newH);
        }
        
        const clipId = 'clip' + Date.now();
        const clipPath = document.createElementNS('http://www.w3.org/2000/svg', 'clipPath');
        clipPath.setAttribute('id', clipId);
        const clipRect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
        clipRect.setAttribute('x', x);
        clipRect.setAttribute('y', y);
        clipRect.setAttribute('width', parseFloat(foClone.getAttribute('width')));
        clipRect.setAttribute('height', parseFloat(foClone.getAttribute('height')) - 5);
        clipPath.appendChild(clipRect);
        
        const defs = clone.querySelector('defs');
        defs.appendChild(clipPath);
        
        const svgText = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        svgText.setAttribute('x', x);
        svgText.setAttribute('y', y);
        svgText.setAttribute('font-family', "'Source Sans 3', sans-serif");
        svgText.setAttribute('font-size', cs.fontSize);
        svgText.setAttribute('font-weight', cs.fontWeight);
        svgText.setAttribute('fill', cs.color);
        svgText.setAttribute('dominant-baseline', 'hanging');
        svgText.setAttribute('clip-path', `url(#${clipId})`);

        lines.forEach((line, idx) => {
            const tspan = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');
            tspan.setAttribute('x', x);
            tspan.setAttribute('dy', idx === 0 ? 0 : lh + 'px');
            tspan.textContent = line;
            svgText.appendChild(tspan);
        });
        
        foClone.parentNode.replaceChild(svgText, foClone);

        const finalH = parseFloat(clone.getAttribute('height'));

        const str = new XMLSerializer().serializeToString(clone);
        const blob = new Blob([str], { type: 'image/svg+xml;charset=utf-8' });
        const url = URL.createObjectURL(blob);

        const img = new Image();
        img.onload = () => {
            const canvas = document.createElement('canvas');
            const w = parseFloat(elem.getAttribute('width'));
            
            canvas.width = w * scale;
            canvas.height = finalH * scale;
            
            const ctx = canvas.getContext('2d');
            ctx.scale(scale, scale);
            ctx.drawImage(img, 0, 0, w, finalH);

            URL.revokeObjectURL(url);
            
            const first = lines[0] || 'dialog';
            const fname = (first.replace(/[\\/*?:"<>|]/g, '').trim().substring(0, 50) || 'dialog') + '.png';
            
            const a = document.createElement('a');
            a.download = fname;
            a.href = canvas.toDataURL('image/png');
            a.click();
        };
        img.onerror = (e) => {
            console.error("svg fail", e);
            URL.revokeObjectURL(url);
        };
        img.src = url;
    }
</script>

</body>
</html>
